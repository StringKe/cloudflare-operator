---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.2
  name: accesspolicies.networking.cloudflare-operator.io
spec:
  group: networking.cloudflare-operator.io
  names:
    kind: AccessPolicy
    listKind: AccessPolicyList
    plural: accesspolicies
    shortNames:
    - accesspol
    singular: accesspolicy
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.decision
      name: Decision
      type: string
    - jsonPath: .status.policyId
      name: PolicyID
      type: string
    - jsonPath: .status.state
      name: State
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha2
    schema:
      openAPIV3Schema:
        description: |-
          AccessPolicy is the Schema for the accesspolicies API.
          An AccessPolicy represents a reusable Cloudflare Access Policy that can be
          attached to multiple Access Applications. This allows for centralized policy
          management and consistent access control across applications.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: |-
              AccessPolicySpec defines the desired state of AccessPolicy.
              This represents a reusable Access Policy in Cloudflare that can be
              attached to multiple Access Applications.
            properties:
              approvalGroups:
                description: |-
                  ApprovalGroups defines the groups that can approve access requests.
                  Required when ApprovalRequired is true.
                items:
                  description: ApprovalGroup defines an approval group configuration
                    for access requests.
                  properties:
                    approvalsNeeded:
                      default: 1
                      description: ApprovalsNeeded is the number of approvals required
                        from this group.
                      minimum: 1
                      type: integer
                    emailAddresses:
                      description: EmailAddresses is a list of email addresses that
                        can approve access requests.
                      items:
                        type: string
                      type: array
                    emailListUuid:
                      description: EmailListUUID is the UUID of an email list that
                        can approve access requests.
                      pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                      type: string
                  type: object
                type: array
              approvalRequired:
                description: |-
                  ApprovalRequired requires admin approval for access.
                  When enabled, users must request and receive approval before accessing.
                type: boolean
              cloudflare:
                description: Cloudflare contains the Cloudflare API credentials and
                  account information.
                properties:
                  CLOUDFLARE_API_KEY:
                    description: |-
                      Key in the secret to use for Cloudflare API Key.
                      If not specified, defaults to "CLOUDFLARE_API_KEY" at runtime.
                      Needs Email also to be provided.
                      For Delete operations for new tunnels only, or as an alternate to API Token.
                    type: string
                  CLOUDFLARE_API_TOKEN:
                    description: |-
                      Key in the secret to use for Cloudflare API token.
                      If not specified, defaults to "CLOUDFLARE_API_TOKEN" at runtime.
                    type: string
                  CLOUDFLARE_TUNNEL_CREDENTIAL_FILE:
                    description: |-
                      Key in the secret to use as credentials.json for an existing tunnel.
                      If not specified, defaults to "CLOUDFLARE_TUNNEL_CREDENTIAL_FILE" at runtime.
                    type: string
                  CLOUDFLARE_TUNNEL_CREDENTIAL_SECRET:
                    description: |-
                      Key in the secret to use as tunnel secret for an existing tunnel.
                      If not specified, defaults to "CLOUDFLARE_TUNNEL_CREDENTIAL_SECRET" at runtime.
                    type: string
                  accountId:
                    description: Account ID in Cloudflare. AccountId and AccountName
                      cannot be both empty. If both are provided, Account ID is used
                      if valid, else falls back to Account Name.
                    type: string
                  accountName:
                    description: Account Name in Cloudflare. AccountName and AccountId
                      cannot be both empty. If both are provided, Account ID is used
                      if valid, else falls back to Account Name.
                    type: string
                  credentialsRef:
                    description: |-
                      CredentialsRef references a CloudflareCredentials resource for API authentication.
                      When specified, this takes precedence over inline credential fields.
                      This is the recommended way to configure credentials.
                    properties:
                      name:
                        description: Name of the CloudflareCredentials resource to
                          use
                        type: string
                    required:
                    - name
                    type: object
                  domain:
                    description: |-
                      Cloudflare Domain to which this tunnel belongs to.
                      Required if not using credentialsRef with a defaultDomain.
                    type: string
                  email:
                    description: Email to use along with API Key for Delete operations
                      for new tunnels only, or as an alternate to API Token
                    type: string
                  secret:
                    description: Secret containing Cloudflare API key/token (legacy,
                      use credentialsRef instead)
                    type: string
                  zoneId:
                    description: |-
                      ZoneId is the Cloudflare Zone ID for DNS operations.
                      If not specified, it will be looked up via CloudflareDomain or the domain field.
                      Specifying this directly is useful for multi-zone scenarios.
                    type: string
                type: object
              decision:
                default: allow
                description: Decision is the policy decision (allow, deny, bypass,
                  non_identity).
                enum:
                - allow
                - deny
                - bypass
                - non_identity
                type: string
              exclude:
                description: |-
                  Exclude defines the rules that must NOT match (NOT logic).
                  If any exclude rule matches, the policy does not apply.
                items:
                  description: AccessGroupRule defines a single rule in an Access
                    Group.
                  properties:
                    anyValidServiceToken:
                      description: AnyValidServiceToken matches any valid service
                        token.
                      type: boolean
                    authContext:
                      description: AuthContext matches Azure Authentication Context.
                      properties:
                        acId:
                          description: AcID is the Azure AD Conditional Access Policy
                            ID.
                          type: string
                        id:
                          description: ID is the Azure Authentication Context ID.
                          type: string
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                      required:
                      - acId
                      - id
                      type: object
                    authMethod:
                      description: AuthMethod enforces different MFA options.
                      properties:
                        authMethod:
                          description: AuthMethod is the authentication method type
                            (e.g., "mfa").
                          type: string
                      required:
                      - authMethod
                      type: object
                    azure:
                      description: Azure matches users from Azure AD groups.
                      properties:
                        id:
                          type: string
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                      required:
                      - id
                      type: object
                    certificate:
                      description: Certificate matches requests with a valid mTLS
                        certificate.
                      type: boolean
                    commonName:
                      description: CommonName matches mTLS certificates with a specific
                        common name.
                      properties:
                        commonName:
                          type: string
                      required:
                      - commonName
                      type: object
                    country:
                      description: Country matches users from specific countries.
                      properties:
                        country:
                          items:
                            type: string
                          type: array
                      required:
                      - country
                      type: object
                    devicePosture:
                      description: DevicePosture matches devices that pass posture
                        checks.
                      properties:
                        integrationUid:
                          type: string
                      required:
                      - integrationUid
                      type: object
                    email:
                      description: Email matches a specific email address.
                      properties:
                        email:
                          type: string
                      required:
                      - email
                      type: object
                    emailDomain:
                      description: EmailDomain matches all emails from a domain.
                      properties:
                        domain:
                          type: string
                      required:
                      - domain
                      type: object
                    emailList:
                      description: EmailList matches emails from a predefined list.
                      properties:
                        id:
                          description: ID is the Cloudflare ID of the email list.
                          type: string
                      required:
                      - id
                      type: object
                    everyone:
                      description: Everyone matches all users.
                      type: boolean
                    externalEvaluation:
                      description: ExternalEvaluation calls an external endpoint for
                        evaluation.
                      properties:
                        evaluateUrl:
                          type: string
                        keysUrl:
                          type: string
                      required:
                      - evaluateUrl
                      - keysUrl
                      type: object
                    github:
                      description: GitHub matches users from GitHub organizations.
                      properties:
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                        name:
                          type: string
                        teams:
                          items:
                            type: string
                          type: array
                      required:
                      - name
                      type: object
                    group:
                      description: Group matches users in a specific IdP group.
                      properties:
                        id:
                          type: string
                      required:
                      - id
                      type: object
                    gsuite:
                      description: GSUITE matches users from Google Workspace.
                      properties:
                        email:
                          type: string
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                      required:
                      - email
                      type: object
                    ipList:
                      description: IPList matches users from a predefined IP list.
                      properties:
                        id:
                          description: ID is the Cloudflare ID of the IP list.
                          type: string
                      required:
                      - id
                      type: object
                    ipRanges:
                      description: IPRanges matches users from specific IP ranges.
                      properties:
                        ip:
                          items:
                            type: string
                          type: array
                      required:
                      - ip
                      type: object
                    loginMethod:
                      description: LoginMethod matches a specific identity provider.
                      properties:
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                      type: object
                    oidc:
                      description: OIDC matches users based on OIDC claims.
                      properties:
                        claimName:
                          type: string
                        claimValue:
                          type: string
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                      required:
                      - claimName
                      - claimValue
                      type: object
                    okta:
                      description: Okta matches users from Okta groups.
                      properties:
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                        name:
                          description: Name is the Okta group name.
                          type: string
                      required:
                      - name
                      type: object
                    saml:
                      description: SAML matches users based on SAML attributes.
                      properties:
                        attributeName:
                          type: string
                        attributeValue:
                          type: string
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                      required:
                      - attributeName
                      - attributeValue
                      type: object
                    serviceToken:
                      description: ServiceToken matches requests with a specific service
                        token.
                      properties:
                        tokenId:
                          type: string
                      required:
                      - tokenId
                      type: object
                  type: object
                type: array
              include:
                description: |-
                  Include defines the rules that must match (OR logic).
                  At least one include rule must match for the policy to apply.
                items:
                  description: AccessGroupRule defines a single rule in an Access
                    Group.
                  properties:
                    anyValidServiceToken:
                      description: AnyValidServiceToken matches any valid service
                        token.
                      type: boolean
                    authContext:
                      description: AuthContext matches Azure Authentication Context.
                      properties:
                        acId:
                          description: AcID is the Azure AD Conditional Access Policy
                            ID.
                          type: string
                        id:
                          description: ID is the Azure Authentication Context ID.
                          type: string
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                      required:
                      - acId
                      - id
                      type: object
                    authMethod:
                      description: AuthMethod enforces different MFA options.
                      properties:
                        authMethod:
                          description: AuthMethod is the authentication method type
                            (e.g., "mfa").
                          type: string
                      required:
                      - authMethod
                      type: object
                    azure:
                      description: Azure matches users from Azure AD groups.
                      properties:
                        id:
                          type: string
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                      required:
                      - id
                      type: object
                    certificate:
                      description: Certificate matches requests with a valid mTLS
                        certificate.
                      type: boolean
                    commonName:
                      description: CommonName matches mTLS certificates with a specific
                        common name.
                      properties:
                        commonName:
                          type: string
                      required:
                      - commonName
                      type: object
                    country:
                      description: Country matches users from specific countries.
                      properties:
                        country:
                          items:
                            type: string
                          type: array
                      required:
                      - country
                      type: object
                    devicePosture:
                      description: DevicePosture matches devices that pass posture
                        checks.
                      properties:
                        integrationUid:
                          type: string
                      required:
                      - integrationUid
                      type: object
                    email:
                      description: Email matches a specific email address.
                      properties:
                        email:
                          type: string
                      required:
                      - email
                      type: object
                    emailDomain:
                      description: EmailDomain matches all emails from a domain.
                      properties:
                        domain:
                          type: string
                      required:
                      - domain
                      type: object
                    emailList:
                      description: EmailList matches emails from a predefined list.
                      properties:
                        id:
                          description: ID is the Cloudflare ID of the email list.
                          type: string
                      required:
                      - id
                      type: object
                    everyone:
                      description: Everyone matches all users.
                      type: boolean
                    externalEvaluation:
                      description: ExternalEvaluation calls an external endpoint for
                        evaluation.
                      properties:
                        evaluateUrl:
                          type: string
                        keysUrl:
                          type: string
                      required:
                      - evaluateUrl
                      - keysUrl
                      type: object
                    github:
                      description: GitHub matches users from GitHub organizations.
                      properties:
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                        name:
                          type: string
                        teams:
                          items:
                            type: string
                          type: array
                      required:
                      - name
                      type: object
                    group:
                      description: Group matches users in a specific IdP group.
                      properties:
                        id:
                          type: string
                      required:
                      - id
                      type: object
                    gsuite:
                      description: GSUITE matches users from Google Workspace.
                      properties:
                        email:
                          type: string
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                      required:
                      - email
                      type: object
                    ipList:
                      description: IPList matches users from a predefined IP list.
                      properties:
                        id:
                          description: ID is the Cloudflare ID of the IP list.
                          type: string
                      required:
                      - id
                      type: object
                    ipRanges:
                      description: IPRanges matches users from specific IP ranges.
                      properties:
                        ip:
                          items:
                            type: string
                          type: array
                      required:
                      - ip
                      type: object
                    loginMethod:
                      description: LoginMethod matches a specific identity provider.
                      properties:
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                      type: object
                    oidc:
                      description: OIDC matches users based on OIDC claims.
                      properties:
                        claimName:
                          type: string
                        claimValue:
                          type: string
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                      required:
                      - claimName
                      - claimValue
                      type: object
                    okta:
                      description: Okta matches users from Okta groups.
                      properties:
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                        name:
                          description: Name is the Okta group name.
                          type: string
                      required:
                      - name
                      type: object
                    saml:
                      description: SAML matches users based on SAML attributes.
                      properties:
                        attributeName:
                          type: string
                        attributeValue:
                          type: string
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                      required:
                      - attributeName
                      - attributeValue
                      type: object
                    serviceToken:
                      description: ServiceToken matches requests with a specific service
                        token.
                      properties:
                        tokenId:
                          type: string
                      required:
                      - tokenId
                      type: object
                  type: object
                minItems: 1
                type: array
              isolationRequired:
                description: |-
                  IsolationRequired enables browser isolation for this policy.
                  When enabled, users must access the application through Cloudflare Browser Isolation.
                type: boolean
              name:
                description: |-
                  Name of the Access Policy in Cloudflare.
                  If not specified, the Kubernetes resource name will be used.
                maxLength: 255
                type: string
              precedence:
                description: |-
                  Precedence is the order in which policies are evaluated.
                  Lower numbers are evaluated first.
                minimum: 1
                type: integer
              purposeJustificationPrompt:
                description: PurposeJustificationPrompt is the custom prompt shown
                  when justification is required.
                maxLength: 1024
                type: string
              purposeJustificationRequired:
                description: PurposeJustificationRequired requires users to provide
                  a justification for access.
                type: boolean
              require:
                description: |-
                  Require defines the rules that must ALL match (AND logic).
                  All require rules must match for the policy to apply.
                items:
                  description: AccessGroupRule defines a single rule in an Access
                    Group.
                  properties:
                    anyValidServiceToken:
                      description: AnyValidServiceToken matches any valid service
                        token.
                      type: boolean
                    authContext:
                      description: AuthContext matches Azure Authentication Context.
                      properties:
                        acId:
                          description: AcID is the Azure AD Conditional Access Policy
                            ID.
                          type: string
                        id:
                          description: ID is the Azure Authentication Context ID.
                          type: string
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                      required:
                      - acId
                      - id
                      type: object
                    authMethod:
                      description: AuthMethod enforces different MFA options.
                      properties:
                        authMethod:
                          description: AuthMethod is the authentication method type
                            (e.g., "mfa").
                          type: string
                      required:
                      - authMethod
                      type: object
                    azure:
                      description: Azure matches users from Azure AD groups.
                      properties:
                        id:
                          type: string
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                      required:
                      - id
                      type: object
                    certificate:
                      description: Certificate matches requests with a valid mTLS
                        certificate.
                      type: boolean
                    commonName:
                      description: CommonName matches mTLS certificates with a specific
                        common name.
                      properties:
                        commonName:
                          type: string
                      required:
                      - commonName
                      type: object
                    country:
                      description: Country matches users from specific countries.
                      properties:
                        country:
                          items:
                            type: string
                          type: array
                      required:
                      - country
                      type: object
                    devicePosture:
                      description: DevicePosture matches devices that pass posture
                        checks.
                      properties:
                        integrationUid:
                          type: string
                      required:
                      - integrationUid
                      type: object
                    email:
                      description: Email matches a specific email address.
                      properties:
                        email:
                          type: string
                      required:
                      - email
                      type: object
                    emailDomain:
                      description: EmailDomain matches all emails from a domain.
                      properties:
                        domain:
                          type: string
                      required:
                      - domain
                      type: object
                    emailList:
                      description: EmailList matches emails from a predefined list.
                      properties:
                        id:
                          description: ID is the Cloudflare ID of the email list.
                          type: string
                      required:
                      - id
                      type: object
                    everyone:
                      description: Everyone matches all users.
                      type: boolean
                    externalEvaluation:
                      description: ExternalEvaluation calls an external endpoint for
                        evaluation.
                      properties:
                        evaluateUrl:
                          type: string
                        keysUrl:
                          type: string
                      required:
                      - evaluateUrl
                      - keysUrl
                      type: object
                    github:
                      description: GitHub matches users from GitHub organizations.
                      properties:
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                        name:
                          type: string
                        teams:
                          items:
                            type: string
                          type: array
                      required:
                      - name
                      type: object
                    group:
                      description: Group matches users in a specific IdP group.
                      properties:
                        id:
                          type: string
                      required:
                      - id
                      type: object
                    gsuite:
                      description: GSUITE matches users from Google Workspace.
                      properties:
                        email:
                          type: string
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                      required:
                      - email
                      type: object
                    ipList:
                      description: IPList matches users from a predefined IP list.
                      properties:
                        id:
                          description: ID is the Cloudflare ID of the IP list.
                          type: string
                      required:
                      - id
                      type: object
                    ipRanges:
                      description: IPRanges matches users from specific IP ranges.
                      properties:
                        ip:
                          items:
                            type: string
                          type: array
                      required:
                      - ip
                      type: object
                    loginMethod:
                      description: LoginMethod matches a specific identity provider.
                      properties:
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                      type: object
                    oidc:
                      description: OIDC matches users based on OIDC claims.
                      properties:
                        claimName:
                          type: string
                        claimValue:
                          type: string
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                      required:
                      - claimName
                      - claimValue
                      type: object
                    okta:
                      description: Okta matches users from Okta groups.
                      properties:
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                        name:
                          description: Name is the Okta group name.
                          type: string
                      required:
                      - name
                      type: object
                    saml:
                      description: SAML matches users based on SAML attributes.
                      properties:
                        attributeName:
                          type: string
                        attributeValue:
                          type: string
                        idpRef:
                          description: |-
                            IdpRef references an AccessIdentityProvider with flexible reference modes.
                            Can reference by K8s name, Cloudflare UUID, or Cloudflare display name.
                          properties:
                            cloudflareId:
                              description: |-
                                CloudflareID is the Cloudflare IdP UUID.
                                Use this to directly reference a Cloudflare-managed IdP
                                without creating a corresponding K8s AccessIdentityProvider resource.
                              pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
                              type: string
                            cloudflareName:
                              description: |-
                                CloudflareName is the display name of the IdP in Cloudflare.
                                The controller will resolve this name to an ID via the Cloudflare API.
                                Use this when you want to reference an IdP by name
                                (e.g., IdPs created via Terraform or the Cloudflare dashboard).
                              maxLength: 255
                              type: string
                            name:
                              description: |-
                                Name is the K8s AccessIdentityProvider resource name.
                                The controller will look up the CRD and use its status.providerID.
                              maxLength: 253
                              type: string
                          type: object
                      required:
                      - attributeName
                      - attributeValue
                      type: object
                    serviceToken:
                      description: ServiceToken matches requests with a specific service
                        token.
                      properties:
                        tokenId:
                          type: string
                      required:
                      - tokenId
                      type: object
                  type: object
                type: array
              sessionDuration:
                description: |-
                  SessionDuration overrides the application's session duration for this policy.
                  Format: Go duration string (e.g., "24h", "30m").
                pattern: ^[0-9]+(h|m|s)+$
                type: string
            required:
            - cloudflare
            - decision
            - include
            type: object
          status:
            description: AccessPolicyStatus defines the observed state of AccessPolicy.
            properties:
              accountId:
                description: AccountID is the Cloudflare Account ID.
                type: string
              conditions:
                description: Conditions represent the latest available observations.
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              observedGeneration:
                description: ObservedGeneration is the most recent generation observed.
                format: int64
                type: integer
              policyId:
                description: PolicyID is the Cloudflare ID of the reusable Access
                  Policy.
                type: string
              state:
                description: |-
                  State indicates the current state of the policy.
                  Possible values: pending, Ready, Error
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
