---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.2
  name: domainregistrations.networking.cloudflare-operator.io
spec:
  group: networking.cloudflare-operator.io
  names:
    kind: DomainRegistration
    listKind: DomainRegistrationList
    plural: domainregistrations
    shortNames:
    - cfdomreg
    - domainreg
    singular: domainregistration
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.domainName
      name: Domain
      type: string
    - jsonPath: .status.currentRegistrar
      name: Registrar
      type: string
    - jsonPath: .status.expiresAt
      name: Expires
      type: date
    - jsonPath: .status.autoRenew
      name: AutoRenew
      type: boolean
    - jsonPath: .status.state
      name: State
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha2
    schema:
      openAPIV3Schema:
        description: |-
          DomainRegistration manages Cloudflare Registrar domain settings.
          This CRD allows you to configure settings for domains registered with
          Cloudflare Registrar, including auto-renewal, WHOIS privacy, and
          transfer lock settings.

          Note: This CRD manages existing domains registered with Cloudflare.
          Domain registration itself must be done through the Cloudflare dashboard
          or API directly due to payment and verification requirements.

          Enterprise Feature: Some advanced features like registry lock require
          an Enterprise plan.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: DomainRegistrationSpec defines the desired state of DomainRegistration
            properties:
              configuration:
                description: Configuration contains domain settings
                properties:
                  autoRenew:
                    default: true
                    description: AutoRenew enables automatic domain renewal
                    type: boolean
                  locked:
                    default: true
                    description: Locked prevents unauthorized transfers
                    type: boolean
                  nameServers:
                    description: |-
                      NameServers specifies custom nameservers (optional)
                      If not specified, Cloudflare nameservers will be used
                    items:
                      type: string
                    type: array
                  privacy:
                    default: true
                    description: Privacy enables WHOIS privacy protection
                    type: boolean
                type: object
              credentialsRef:
                description: |-
                  CredentialsRef references a CloudflareCredentials resource
                  If not specified, the default CloudflareCredentials will be used
                properties:
                  name:
                    description: Name of the CloudflareCredentials resource
                    type: string
                required:
                - name
                type: object
              domainName:
                description: |-
                  DomainName is the domain name to manage
                  This domain must already be registered with Cloudflare Registrar
                pattern: ^[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$
                type: string
              registrantContact:
                description: |-
                  RegistrantContact contains the registrant contact information
                  If not specified, existing contact information will be preserved
                properties:
                  address:
                    description: Address is the street address
                    type: string
                  address2:
                    description: Address2 is the secondary address line (optional)
                    type: string
                  city:
                    description: City is the city
                    type: string
                  country:
                    description: Country is the two-letter country code (ISO 3166-1
                      alpha-2)
                    pattern: ^[A-Z]{2}$
                    type: string
                  email:
                    description: Email is the contact email address
                    type: string
                  fax:
                    description: Fax is the fax number (optional)
                    type: string
                  firstName:
                    description: FirstName is the registrant's first name
                    type: string
                  lastName:
                    description: LastName is the registrant's last name
                    type: string
                  organization:
                    description: Organization is the registrant's organization (optional)
                    type: string
                  phone:
                    description: Phone is the phone number in E.164 format
                    type: string
                  state:
                    description: State is the state/province
                    type: string
                  zip:
                    description: Zip is the postal/zip code
                    type: string
                required:
                - address
                - city
                - country
                - email
                - firstName
                - lastName
                - phone
                - state
                - zip
                type: object
            required:
            - domainName
            type: object
          status:
            description: DomainRegistrationStatus defines the observed state of DomainRegistration
            properties:
              accountId:
                description: AccountID is the Cloudflare account ID
                type: string
              autoRenew:
                description: AutoRenew indicates if auto-renewal is enabled
                type: boolean
              conditions:
                description: Conditions represent the latest available observations
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
              createdAt:
                description: CreatedAt is when the domain was registered
                format: date-time
                type: string
              currentRegistrar:
                description: CurrentRegistrar is the current registrar name
                type: string
              domainId:
                description: DomainID is the Cloudflare domain ID
                type: string
              expiresAt:
                description: ExpiresAt is when the domain registration expires
                format: date-time
                type: string
              locked:
                description: Locked indicates if the domain is locked
                type: boolean
              message:
                description: Message provides additional information about the current
                  state
                type: string
              observedGeneration:
                description: ObservedGeneration is the most recent generation observed
                format: int64
                type: integer
              privacy:
                description: Privacy indicates if WHOIS privacy is enabled
                type: boolean
              registryStatuses:
                description: RegistryStatuses contains the registry status codes
                type: string
              state:
                description: State represents the current state of the domain
                enum:
                - Pending
                - Syncing
                - Active
                - TransferPending
                - Expired
                - Error
                type: string
              transferInStatus:
                description: TransferInStatus contains transfer status if applicable
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
