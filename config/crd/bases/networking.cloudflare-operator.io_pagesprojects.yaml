---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.2
  name: pagesprojects.networking.cloudflare-operator.io
spec:
  group: networking.cloudflare-operator.io
  names:
    kind: PagesProject
    listKind: PagesProjectList
    plural: pagesprojects
    shortNames:
    - cfpages
    - pagesproject
    singular: pagesproject
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.projectId
      name: Project
      type: string
    - jsonPath: .status.subdomain
      name: Subdomain
      type: string
    - jsonPath: .status.state
      name: State
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha2
    schema:
      openAPIV3Schema:
        description: |-
          PagesProject manages a Cloudflare Pages project.
          Cloudflare Pages is a JAMstack platform for deploying static sites and full-stack applications.

          The controller creates and manages Pages projects in your Cloudflare account,
          including build configuration, environment variables, and resource bindings.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: PagesProjectSpec defines the desired state of PagesProject
            properties:
              buildConfig:
                description: BuildConfig contains the build configuration.
                properties:
                  buildCaching:
                    default: true
                    description: BuildCaching enables build caching.
                    type: boolean
                  buildCommand:
                    description: BuildCommand is the command to build the project.
                    type: string
                  destinationDir:
                    description: DestinationDir is the build output directory.
                    type: string
                  rootDir:
                    description: RootDir is the root directory for the build.
                    type: string
                  webAnalyticsTag:
                    description: WebAnalyticsTag is the Web Analytics tag.
                    type: string
                  webAnalyticsToken:
                    description: WebAnalyticsToken is the Web Analytics token.
                    type: string
                type: object
              cloudflare:
                description: Cloudflare contains Cloudflare-specific configuration.
                properties:
                  CLOUDFLARE_API_KEY:
                    default: CLOUDFLARE_API_KEY
                    description: |-
                      Key in the secret to use for Cloudflare API Key, defaults to CLOUDFLARE_API_KEY. Needs Email also to be provided.
                      For Delete operations for new tunnels only, or as an alternate to API Token
                    type: string
                  CLOUDFLARE_API_TOKEN:
                    default: CLOUDFLARE_API_TOKEN
                    description: Key in the secret to use for Cloudflare API token,
                      defaults to CLOUDFLARE_API_TOKEN
                    type: string
                  CLOUDFLARE_TUNNEL_CREDENTIAL_FILE:
                    default: CLOUDFLARE_TUNNEL_CREDENTIAL_FILE
                    description: Key in the secret to use as credentials.json for
                      an existing tunnel, defaults to CLOUDFLARE_TUNNEL_CREDENTIAL_FILE
                    type: string
                  CLOUDFLARE_TUNNEL_CREDENTIAL_SECRET:
                    default: CLOUDFLARE_TUNNEL_CREDENTIAL_SECRET
                    description: Key in the secret to use as tunnel secret for an
                      existing tunnel, defaults to CLOUDFLARE_TUNNEL_CREDENTIAL_SECRET
                    type: string
                  accountId:
                    description: Account ID in Cloudflare. AccountId and AccountName
                      cannot be both empty. If both are provided, Account ID is used
                      if valid, else falls back to Account Name.
                    type: string
                  accountName:
                    description: Account Name in Cloudflare. AccountName and AccountId
                      cannot be both empty. If both are provided, Account ID is used
                      if valid, else falls back to Account Name.
                    type: string
                  credentialsRef:
                    description: |-
                      CredentialsRef references a CloudflareCredentials resource for API authentication.
                      When specified, this takes precedence over inline credential fields.
                      This is the recommended way to configure credentials.
                    properties:
                      name:
                        description: Name of the CloudflareCredentials resource to
                          use
                        type: string
                    required:
                    - name
                    type: object
                  domain:
                    description: |-
                      Cloudflare Domain to which this tunnel belongs to.
                      Required if not using credentialsRef with a defaultDomain.
                    type: string
                  email:
                    description: Email to use along with API Key for Delete operations
                      for new tunnels only, or as an alternate to API Token
                    type: string
                  secret:
                    description: Secret containing Cloudflare API key/token (legacy,
                      use credentialsRef instead)
                    type: string
                  zoneId:
                    description: |-
                      ZoneId is the Cloudflare Zone ID for DNS operations.
                      If not specified, it will be looked up via CloudflareDomain or the domain field.
                      Specifying this directly is useful for multi-zone scenarios.
                    type: string
                type: object
              deletionPolicy:
                default: Delete
                description: |-
                  DeletionPolicy specifies what happens when the Kubernetes resource is deleted.
                  Delete: The Pages project will be deleted from Cloudflare.
                  Orphan: The Pages project will be left in Cloudflare.
                enum:
                - Delete
                - Orphan
                type: string
              deploymentConfigs:
                description: DeploymentConfigs contains environment-specific configurations.
                properties:
                  preview:
                    description: Preview contains preview environment configuration.
                    properties:
                      aiBindings:
                        description: AIBindings for Workers AI.
                        items:
                          description: PagesAIBinding defines a Workers AI binding.
                          properties:
                            name:
                              description: Name is the binding name.
                              type: string
                          required:
                          - name
                          type: object
                        type: array
                      alwaysUseLatestCompatibilityDate:
                        description: AlwaysUseLatestCompatibilityDate to auto-update.
                        type: boolean
                      browserBinding:
                        description: BrowserBinding for Browser Rendering.
                        properties:
                          name:
                            default: BROWSER
                            description: Name is the binding name (optional, defaults
                              to "BROWSER").
                            type: string
                        type: object
                      compatibilityDate:
                        description: CompatibilityDate for Workers runtime.
                        type: string
                      compatibilityFlags:
                        description: CompatibilityFlags for Workers runtime.
                        items:
                          type: string
                        type: array
                      d1Bindings:
                        description: D1Bindings for D1 databases.
                        items:
                          description: PagesD1Binding defines a D1 database binding.
                          properties:
                            databaseId:
                              description: DatabaseID is the D1 database ID.
                              type: string
                            name:
                              description: Name is the binding name.
                              type: string
                          required:
                          - databaseId
                          - name
                          type: object
                        type: array
                      durableObjectBindings:
                        description: DurableObjectBindings for Durable Objects.
                        items:
                          description: PagesDurableObjectBinding defines a Durable
                            Object binding.
                          properties:
                            className:
                              description: ClassName is the Durable Object class name.
                              type: string
                            environmentName:
                              description: EnvironmentName is the Worker environment
                                name.
                              type: string
                            name:
                              description: Name is the binding name.
                              type: string
                            scriptName:
                              description: ScriptName is the Worker script name.
                              type: string
                          required:
                          - className
                          - name
                          type: object
                        type: array
                      environmentVariables:
                        additionalProperties:
                          description: PagesEnvVar defines an environment variable.
                          properties:
                            type:
                              allOf:
                              - enum:
                                - plain_text
                                - secret_text
                              - enum:
                                - plain_text
                                - secret_text
                              default: plain_text
                              description: Type is "plain_text" or "secret_text".
                              type: string
                            value:
                              description: Value is the plain text value.
                              type: string
                          type: object
                        description: EnvironmentVariables for this environment.
                        type: object
                      failOpen:
                        description: FailOpen when Workers script fails.
                        type: boolean
                      hyperdriveBindings:
                        description: HyperdriveBindings for Hyperdrive configurations.
                        items:
                          description: PagesHyperdriveBinding defines a Hyperdrive
                            binding.
                          properties:
                            id:
                              description: ID is the Hyperdrive configuration ID.
                              type: string
                            name:
                              description: Name is the binding name.
                              type: string
                          required:
                          - id
                          - name
                          type: object
                        type: array
                      kvBindings:
                        description: KVBindings for KV namespaces.
                        items:
                          description: PagesKVBinding defines a KV namespace binding.
                          properties:
                            name:
                              description: Name is the binding name.
                              type: string
                            namespaceId:
                              description: NamespaceID is the KV namespace ID.
                              type: string
                          required:
                          - name
                          - namespaceId
                          type: object
                        type: array
                      mtlsCertificates:
                        description: MTLSCertificates for mTLS certificates.
                        items:
                          description: PagesMTLSCertificate defines an mTLS certificate
                            binding.
                          properties:
                            certificateId:
                              description: CertificateID is the mTLS certificate ID.
                              type: string
                            name:
                              description: Name is the binding name.
                              type: string
                          required:
                          - certificateId
                          - name
                          type: object
                        type: array
                      placement:
                        description: Placement for Smart Placement.
                        properties:
                          mode:
                            default: smart
                            description: Mode is the placement mode ("smart" for Smart
                              Placement).
                            type: string
                        type: object
                      queueBindings:
                        description: QueueBindings for Queue producers.
                        items:
                          description: PagesQueueBinding defines a Queue producer
                            binding.
                          properties:
                            name:
                              description: Name is the binding name.
                              type: string
                            queueName:
                              description: QueueName is the Queue name.
                              type: string
                          required:
                          - name
                          - queueName
                          type: object
                        type: array
                      r2Bindings:
                        description: R2Bindings for R2 buckets.
                        items:
                          description: PagesR2Binding defines an R2 bucket binding.
                          properties:
                            bucketName:
                              description: BucketName is the R2 bucket name.
                              type: string
                            name:
                              description: Name is the binding name.
                              type: string
                          required:
                          - bucketName
                          - name
                          type: object
                        type: array
                      serviceBindings:
                        description: ServiceBindings for Workers services.
                        items:
                          description: PagesServiceBinding defines a Workers service
                            binding.
                          properties:
                            environment:
                              description: Environment is the Worker environment.
                              type: string
                            name:
                              description: Name is the binding name.
                              type: string
                            service:
                              description: Service is the Worker service name.
                              type: string
                          required:
                          - name
                          - service
                          type: object
                        type: array
                      usageModel:
                        description: UsageModel for Workers Unbound.
                        enum:
                        - bundled
                        - unbound
                        type: string
                      vectorizeBindings:
                        description: VectorizeBindings for Vectorize indexes.
                        items:
                          description: PagesVectorizeBinding defines a Vectorize index
                            binding.
                          properties:
                            indexName:
                              description: IndexName is the Vectorize index name.
                              type: string
                            name:
                              description: Name is the binding name.
                              type: string
                          required:
                          - indexName
                          - name
                          type: object
                        type: array
                    type: object
                  production:
                    description: Production contains production environment configuration.
                    properties:
                      aiBindings:
                        description: AIBindings for Workers AI.
                        items:
                          description: PagesAIBinding defines a Workers AI binding.
                          properties:
                            name:
                              description: Name is the binding name.
                              type: string
                          required:
                          - name
                          type: object
                        type: array
                      alwaysUseLatestCompatibilityDate:
                        description: AlwaysUseLatestCompatibilityDate to auto-update.
                        type: boolean
                      browserBinding:
                        description: BrowserBinding for Browser Rendering.
                        properties:
                          name:
                            default: BROWSER
                            description: Name is the binding name (optional, defaults
                              to "BROWSER").
                            type: string
                        type: object
                      compatibilityDate:
                        description: CompatibilityDate for Workers runtime.
                        type: string
                      compatibilityFlags:
                        description: CompatibilityFlags for Workers runtime.
                        items:
                          type: string
                        type: array
                      d1Bindings:
                        description: D1Bindings for D1 databases.
                        items:
                          description: PagesD1Binding defines a D1 database binding.
                          properties:
                            databaseId:
                              description: DatabaseID is the D1 database ID.
                              type: string
                            name:
                              description: Name is the binding name.
                              type: string
                          required:
                          - databaseId
                          - name
                          type: object
                        type: array
                      durableObjectBindings:
                        description: DurableObjectBindings for Durable Objects.
                        items:
                          description: PagesDurableObjectBinding defines a Durable
                            Object binding.
                          properties:
                            className:
                              description: ClassName is the Durable Object class name.
                              type: string
                            environmentName:
                              description: EnvironmentName is the Worker environment
                                name.
                              type: string
                            name:
                              description: Name is the binding name.
                              type: string
                            scriptName:
                              description: ScriptName is the Worker script name.
                              type: string
                          required:
                          - className
                          - name
                          type: object
                        type: array
                      environmentVariables:
                        additionalProperties:
                          description: PagesEnvVar defines an environment variable.
                          properties:
                            type:
                              allOf:
                              - enum:
                                - plain_text
                                - secret_text
                              - enum:
                                - plain_text
                                - secret_text
                              default: plain_text
                              description: Type is "plain_text" or "secret_text".
                              type: string
                            value:
                              description: Value is the plain text value.
                              type: string
                          type: object
                        description: EnvironmentVariables for this environment.
                        type: object
                      failOpen:
                        description: FailOpen when Workers script fails.
                        type: boolean
                      hyperdriveBindings:
                        description: HyperdriveBindings for Hyperdrive configurations.
                        items:
                          description: PagesHyperdriveBinding defines a Hyperdrive
                            binding.
                          properties:
                            id:
                              description: ID is the Hyperdrive configuration ID.
                              type: string
                            name:
                              description: Name is the binding name.
                              type: string
                          required:
                          - id
                          - name
                          type: object
                        type: array
                      kvBindings:
                        description: KVBindings for KV namespaces.
                        items:
                          description: PagesKVBinding defines a KV namespace binding.
                          properties:
                            name:
                              description: Name is the binding name.
                              type: string
                            namespaceId:
                              description: NamespaceID is the KV namespace ID.
                              type: string
                          required:
                          - name
                          - namespaceId
                          type: object
                        type: array
                      mtlsCertificates:
                        description: MTLSCertificates for mTLS certificates.
                        items:
                          description: PagesMTLSCertificate defines an mTLS certificate
                            binding.
                          properties:
                            certificateId:
                              description: CertificateID is the mTLS certificate ID.
                              type: string
                            name:
                              description: Name is the binding name.
                              type: string
                          required:
                          - certificateId
                          - name
                          type: object
                        type: array
                      placement:
                        description: Placement for Smart Placement.
                        properties:
                          mode:
                            default: smart
                            description: Mode is the placement mode ("smart" for Smart
                              Placement).
                            type: string
                        type: object
                      queueBindings:
                        description: QueueBindings for Queue producers.
                        items:
                          description: PagesQueueBinding defines a Queue producer
                            binding.
                          properties:
                            name:
                              description: Name is the binding name.
                              type: string
                            queueName:
                              description: QueueName is the Queue name.
                              type: string
                          required:
                          - name
                          - queueName
                          type: object
                        type: array
                      r2Bindings:
                        description: R2Bindings for R2 buckets.
                        items:
                          description: PagesR2Binding defines an R2 bucket binding.
                          properties:
                            bucketName:
                              description: BucketName is the R2 bucket name.
                              type: string
                            name:
                              description: Name is the binding name.
                              type: string
                          required:
                          - bucketName
                          - name
                          type: object
                        type: array
                      serviceBindings:
                        description: ServiceBindings for Workers services.
                        items:
                          description: PagesServiceBinding defines a Workers service
                            binding.
                          properties:
                            environment:
                              description: Environment is the Worker environment.
                              type: string
                            name:
                              description: Name is the binding name.
                              type: string
                            service:
                              description: Service is the Worker service name.
                              type: string
                          required:
                          - name
                          - service
                          type: object
                        type: array
                      usageModel:
                        description: UsageModel for Workers Unbound.
                        enum:
                        - bundled
                        - unbound
                        type: string
                      vectorizeBindings:
                        description: VectorizeBindings for Vectorize indexes.
                        items:
                          description: PagesVectorizeBinding defines a Vectorize index
                            binding.
                          properties:
                            indexName:
                              description: IndexName is the Vectorize index name.
                              type: string
                            name:
                              description: Name is the binding name.
                              type: string
                          required:
                          - indexName
                          - name
                          type: object
                        type: array
                    type: object
                type: object
              name:
                description: |-
                  Name is the project name in Cloudflare Pages.
                  Must be unique within the account.
                  If not specified, defaults to the Kubernetes resource name.
                maxLength: 58
                pattern: ^[a-z0-9][a-z0-9-]*[a-z0-9]$
                type: string
              productionBranch:
                description: ProductionBranch is the production branch for the project.
                type: string
              source:
                description: Source contains the source configuration.
                properties:
                  github:
                    description: GitHub config when type is github.
                    properties:
                      deploymentsEnabled:
                        default: true
                        description: DeploymentsEnabled enables deployments globally.
                        type: boolean
                      owner:
                        description: Owner is the GitHub repository owner.
                        type: string
                      prCommentsEnabled:
                        default: true
                        description: PRCommentsEnabled enables PR comments.
                        type: boolean
                      previewDeploymentsEnabled:
                        default: true
                        description: PreviewDeploymentsEnabled enables preview deployments.
                        type: boolean
                      productionDeploymentsEnabled:
                        default: true
                        description: ProductionDeploymentsEnabled enables production
                          deployments.
                        type: boolean
                      repo:
                        description: Repo is the GitHub repository name.
                        type: string
                    required:
                    - owner
                    - repo
                    type: object
                  gitlab:
                    description: GitLab config when type is gitlab.
                    properties:
                      deploymentsEnabled:
                        default: true
                        description: DeploymentsEnabled enables deployments globally.
                        type: boolean
                      owner:
                        description: Owner is the GitLab namespace.
                        type: string
                      previewDeploymentsEnabled:
                        default: true
                        description: PreviewDeploymentsEnabled enables preview deployments.
                        type: boolean
                      productionDeploymentsEnabled:
                        default: true
                        description: ProductionDeploymentsEnabled enables production
                          deployments.
                        type: boolean
                      repo:
                        description: Repo is the GitLab project name.
                        type: string
                    required:
                    - owner
                    - repo
                    type: object
                  type:
                    allOf:
                    - enum:
                      - github
                      - gitlab
                      - direct_upload
                    - enum:
                      - github
                      - gitlab
                      - direct_upload
                    default: direct_upload
                    description: Type is the source type (github, gitlab, direct_upload).
                    type: string
                type: object
            required:
            - cloudflare
            - productionBranch
            type: object
          status:
            description: PagesProjectStatus defines the observed state of PagesProject
            properties:
              accountId:
                description: AccountID is the Cloudflare account ID.
                type: string
              conditions:
                description: Conditions represent the latest available observations.
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              domains:
                description: Domains are the custom domains configured for this project.
                items:
                  type: string
                type: array
              latestDeployment:
                description: LatestDeployment is the latest deployment info.
                properties:
                  createdOn:
                    description: CreatedOn is the time the deployment was created.
                    type: string
                  id:
                    description: ID is the deployment ID.
                    type: string
                  stage:
                    description: Stage is the deployment stage (building, succeeded,
                      failed).
                    type: string
                  url:
                    description: URL is the deployment URL.
                    type: string
                type: object
              message:
                description: Message provides additional information about the current
                  state.
                type: string
              observedGeneration:
                description: ObservedGeneration is the last observed generation.
                format: int64
                type: integer
              projectId:
                description: ProjectID is the Cloudflare project ID (same as name).
                type: string
              state:
                description: State is the current state of the project.
                enum:
                - Pending
                - Creating
                - Ready
                - Updating
                - Deleting
                - Error
                type: string
              subdomain:
                description: Subdomain is the *.pages.dev subdomain.
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
